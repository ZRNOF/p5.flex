/*!
 * p5.flex
 * Version: 0.2.0
 * Author: Zaron Chen
 * License: MIT
 *
 * Copyright (c) 2024 Zaron Chen
 */
(()=>{const t="padding: 0; margin: 0; border: 0;",n="width: 100%; height: 100%;",e="display: flex; justify-content: center; align-items: center;",o="box-sizing: border-box;",i="position: static;",a={pageCSS:()=>{const o=document.documentElement,i=document.body;o.className="",i.className="",o.style.cssText=t+n,i.style.cssText=t+n+e},containerCSS:(t,n)=>{let i="";n.container.customBoxModel||(i=`\n\t\t\t\tmargin:  ${n.container.margin} ;\n\t\t\t\tpadding: ${n.container.padding};\n\t\t\t\tborder:  ${n.container.border} ;\n\t\t\t`),t.style.cssText=`\n\t\t\tmax-width:  ${n.container.width};\n\t\t\tmax-height: ${n.container.height};\n\t\t\twidth:  ${n.container.width};\n\t\t\theight: ${n.container.height};\n\t\t\t${o+e+i}\n\t\t`},canvasScaleCSS:t=>`\n\t\t\tmax-width:  ${100*t.canvas.scale}%;\n\t\t\tmax-height: ${100*t.canvas.scale}%;\n\t\t`,innerContainerCSS:(t,o)=>{let c=a.canvasScaleCSS(o)+i+e+"overflow: hidden;";"cover"===o.canvas.fit&&(c+=n),t.style.cssText=c},canvasCSS:(e,c)=>{const r=c.canvas.fit;let s=a.canvasScaleCSS(c);["cover","none"].includes(r)&&(s=""),"fill"===r&&(s+=n),e.elt.style.cssText=`\n\t\t\t${i+t+o+s+"display: block;"}\n\t\t`}},c={container:{id:void 0,parent:void 0,width:"100%",height:"100%",margin:"0",padding:"0",border:"0",customBoxModel:!1},canvas:{scale:1,fit:"contain"},stylePage:!0},r=(t,n)=>{const e=(o=c,i=n,{...o,...i,container:{...o.container,...i.container},canvas:{...o.canvas,...i.canvas}});var o,i;const r=e.canvas.fit,s=e.container.customBoxModel;e.stylePage&&a.pageCSS();const d=e.container.parent??document.body;e.container.parent=d;const l=document.createElement("div"),p=e.container.id??`p5-flex-container-${t.elt.id}`;let h;l.id=e.container.id=p,t.elt.container=l,a.containerCSS(l,e),l.classList.add("p5-flex-container"),d.appendChild(l),["cover","none"].includes(r)&&(h=document.createElement("div"),a.innerContainerCSS(h,e),l.appendChild(h));const g=()=>{const t=s?getComputedStyle(l):l.style,n=n=>parseFloat(t[`padding${n}`]);return[n("Top")+n("Bottom"),n("Left")+n("Right")]};let[u,v]=g(),y="",S="";const m=n=>{"container"===y&&S===n||(S=n,t.elt.style.width="width"===n?"100%":"",t.elt.style.height="height"===n?"100%":"")},C=()=>{requestAnimationFrame((()=>{s&&([u,v]=g());(l.clientWidth-v)/(l.clientHeight-u)>=t.width/t.height?("contain"===r&&m("height"),"cover"===r&&m("width")):("contain"===r&&m("width"),"cover"===r&&m("height"))}))};["contain","cover"].includes(r)&&new ResizeObserver((()=>{y="container",C()})).observe(l),a.canvasCSS(t,e),["cover","none"].includes(r)?(h.classList.add("p5-flex-canvas"),t.parent(h)):(t.elt.classList.add("p5-flex-canvas"),t.parent(l));const f=t.resize;t.resize=function(n,o){f.call(this,n,o),a.canvasCSS(t,e),["contain","cover"].includes(r)&&(y="canvas",C())}};window.mountFlex=t=>{t.prototype.flex=function(t={}){r(this._renderer,t)},t.prototype.getCanvas=function(){return this._renderer.elt},t.prototype.getContainer=function(){return this.getCanvas().container},t.prototype.getParent=function(){return this.getContainer().parentNode},t.prototype.containerBg=function(t){this.getContainer().style.background=t},t.prototype.containerBgColor=function(...t){const n=this._renderer._pInst.color(...t);this.getContainer().style.background=n.toString()},t.prototype.parentBg=function(t){this.getParent().style.background=t},t.prototype.parentBgColor=function(...t){const n=this._renderer._pInst.color(...t);this.getParent().style.background=n.toString()},t.prototype.NONE="none",t.prototype.SCALE_DOWN="scale_down"},"undefined"!=typeof p5&&mountFlex(p5)})();