/*!
 * p5.flex
 * Version: 0.1.1
 * Author: Zaron Chen
 * License: MIT
 *
 * Copyright (c) 2023 Zaron Chen
 */
(()=>{const t="padding: 0; margin: 0; border: 0;",e="width: 100%; height: 100%;",n="display: flex; justify-content: center; align-items: center;",a="box-sizing: border-box;",i="position: static;",o={pageCSS:()=>{const a=document.documentElement,i=document.body;a.className="",i.className="",a.style.cssText=t+e,i.style.cssText=t+e+n},containerCSS:(t,e)=>{let i="";e.container.customBoxModel||(i=`\n\t\t\t\tmargin:  ${e.container.margin} ;\n\t\t\t\tpadding: ${e.container.padding};\n\t\t\t\tborder:  ${e.container.border} ;\n\t\t\t`),t.style.cssText=`\n\t\t\tmax-width:  ${e.container.width};\n\t\t\tmax-height: ${e.container.height};\n\t\t\twidth:  ${e.container.width};\n\t\t\theight: ${e.container.height};\n\t\t\t${a+n+i}\n\t\t`},canvasScaleCSS:t=>`\n\t\t\tmax-width:  ${100*t.canvas.scale}%;\n\t\t\tmax-height: ${100*t.canvas.scale}%;\n\t\t`,innerContainerCSS:(t,a)=>{let c=o.canvasScaleCSS(a)+i+n+"overflow: hidden;";"cover"===a.canvas.fit&&(c+=e),t.style.cssText=c},canvasCSS:(n,c)=>{const s=c.canvas.fit;let r=o.canvasScaleCSS(c);["cover","none"].includes(s)&&(r=""),"fill"===s&&(r+=e),n.elt.style.cssText=`\n\t\t\t${i+t+a+r+"display: block;"}\n\t\t`}},c={container:{id:void 0,parent:void 0,width:"100%",height:"100%",margin:"0",padding:"0",border:"0",customBoxModel:!1},canvas:{scale:1,fit:"contain"},stylePage:!0},s=(t,e)=>{const n=(a=c,i=e,{...a,...i,container:{...a.container,...i.container},canvas:{...a.canvas,...i.canvas}});var a,i;const s=n.canvas.fit,r=n.container.customBoxModel;n.stylePage&&o.pageCSS();const d=n.container.parent??document.body;n.container.parent=d;const l=document.createElement("div"),h=n.container.id??`p5-flex-container-${t.elt.id}`;let p;l.id=n.container.id=h,t.elt.container=l,o.containerCSS(l,n),l.classList.add("p5-flex-container"),d.appendChild(l),["cover","none"].includes(s)&&(p=document.createElement("div"),o.innerContainerCSS(p,n),l.appendChild(p));const v=()=>{const t=r?getComputedStyle(l):l.style,e=e=>parseFloat(t[`padding${e}`]);return[e("Top")+e("Bottom"),e("Left")+e("Right")]};let[g,m]=v(),S="",u="";const x=e=>{"container"===S&&u===e||(u=e,t.elt.style.width="width"===e?"100%":"",t.elt.style.height="height"===e?"100%":"")},y=()=>{requestAnimationFrame((()=>{r&&([g,m]=v());(l.clientWidth-m)/(l.clientHeight-g)>=t.width/t.height?("contain"===s&&x("height"),"cover"===s&&x("width")):("contain"===s&&x("width"),"cover"===s&&x("height"))}))};["contain","cover"].includes(s)&&new ResizeObserver((()=>{S="container",y()})).observe(l),o.canvasCSS(t,n),["cover","none"].includes(s)?(p.classList.add("p5-flex-canvas"),t.parent(p)):(t.elt.classList.add("p5-flex-canvas"),t.parent(l));const f=t.resize;t.resize=function(e,a){f.call(this,e,a),o.canvasCSS(t,n),["contain","cover"].includes(s)&&(S="canvas",y())}};window.mountFlex=t=>{t.prototype.flex=function(t={}){s(this._renderer,t)},t.prototype.getCanvas=function(){return this._renderer.elt},t.prototype.getContainer=function(){return this._renderer.elt.container},t.prototype.NONE="none",t.prototype.SCALE_DOWN="scale_down"},"undefined"!=typeof p5&&mountFlex(p5)})();